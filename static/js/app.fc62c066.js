(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e59":function(t,e,a){"use strict";var s=a("830e"),i=a.n(s);i.a},"11cc":function(t,e,a){"use strict";var s=a("a470"),i=a.n(s);i.a},1931:function(t,e,a){},4709:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],r={name:"App",components:{}},o=r,l=(a("0e59"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"53f2485c",null),u=c.exports,d=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage container"},[a("router-link",{attrs:{to:{name:"login"}}},[a("p",{staticClass:"admin-login-link"},[t._v("Admin Login")])]),a("router-link",{attrs:{to:{name:"homepage"}}},[a("h1",[t._v("Welcome to machina web application")])]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"}),a("div",{staticClass:"column registration-form"},[t.messages.length?a("div",{staticClass:"notification is-link"},[a("button",{staticClass:"delete",on:{click:t.clearMessages}}),t._l(t.messages,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),t.errors.length?a("div",{staticClass:"notification is-danger"},[a("button",{staticClass:"delete",on:{click:t.clearErrors}}),t._l(t.errors,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),a("h1",[t._v("Registration form")]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"Your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Manager email address")]),a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input ",attrs:{type:"email",placeholder:"you@emaill.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0),t._m(1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Type of participant")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.participant_type,expression:"participant_type"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.participant_type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),a("option",{attrs:{value:"Band"}},[t._v("Band")]),a("option",{attrs:{value:"Carriage"}},[t._v("Carriage")])])])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Foundation Date")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.foundation_date,expression:"foundation_date"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.foundation_date},on:{input:function(e){e.target.composing||(t.foundation_date=e.target.value)}}})])]),a("button",{staticClass:"button is-link is-fullwidth is-rounded",on:{click:t.checkForm}},[t._v("Register")])]),a("div",{staticClass:"column"})])],1)},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-right"},[a("i",{staticClass:"fas fa-exclamation-triangle"})])}],h=a("bc3a"),v=a.n(h),f={name:"Homepage",data(){return{name:"",email:"",participant_type:"",foundation_date:"",errors:[],messages:[]}},methods:{clearMessages:function(){this.messages=[]},clearErrors:function(){this.errors=[]},validEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},checkForm:function(t){this.errors=[],this.name||this.errors.push("Name required."),this.participant_type||this.errors.push("Participant type required."),this.foundation_date||this.errors.push("Foundation date required."),this.email?this.validEmail(this.email)||this.errors.push("Valid email required."):this.errors.push("Email required."),this.errors.length||this.handleSubmit(),t.preventDefault()},handleSubmit(){if(!this.errors.length){let t={name:this.name,manager_email:this.email,participant_type:this.participant_type,foundation_date:this.foundation_date,id:this.id,order_id:""},e="/api/submit/";v()({url:e,data:t,method:"POST"}).then(t=>{const e=t.data;e?(this.messages.push("Record added"),this.name="",this.email="",this.participant_type="",this.foundation_date=""):this.errors.push("Record not added")}).catch(t=>{this.errors.push(t)})}}}},g=f,_=(a("df43"),Object(l["a"])(g,m,p,!1,null,"1c2c5b20",null)),C=_.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage container"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"}),a("div",{staticClass:"column admin-login"},[a("router-link",{attrs:{to:{name:"homepage"}}},[a("h2",[t._v("Machina web application")])]),a("h1",[t._v("Admin Login")]),t.messages.length?a("div",{staticClass:"notification is-link"},[a("button",{staticClass:"delete",on:{click:t.clearMessages}}),t._l(t.messages,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),t.errors.length?a("div",{staticClass:"notification is-danger"},[a("button",{staticClass:"delete",on:{click:t.clearErrors}}),t._l(t.errors,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Username")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Password")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"********"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),a("button",{staticClass:"button is-link is-fullwidth is-rounded",on:{click:t.handleSubmit}},[t._v("Login")])],1),a("div",{staticClass:"column"})])])},y=[],k={name:"Login",data(){return{username:"",password:"",errors:[],messages:[]}},methods:{clearMessages:function(){this.messages=[]},clearErrors:function(){this.errors=[]},handleSubmit(t){t.preventDefault();let e=this.username,a=this.password;if(this.password.length>0&&this.username.length>0){this.processing=!0,this.submitted=!0;const t=new FormData;t.append("username",e),t.append("password",a),this.$store.dispatch("login",t).then(()=>this.$router.push("/dashboard")).catch(t=>{this.errors.push(t)})}else this.email="",this.password=""}}},w=k,x=(a("c250"),Object(l["a"])(w,b,y,!1,null,"b8f93164",null)),P=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column"}),a("div",{staticClass:"row column"},[t.messages.length?a("div",{staticClass:"notification is-link"},[a("button",{staticClass:"delete",on:{click:t.clearMessages}}),t._l(t.messages,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),t.errors.length?a("div",{staticClass:"notification is-danger"},[a("button",{staticClass:"delete",on:{click:t.clearErrors}}),t._l(t.errors,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),a("div",{staticClass:"col-8"},[a("p",{on:{click:t.logout}},[t._v("logout")]),a("table",{staticClass:"table table-striped"},[t._m(0),a("draggable",{attrs:{tag:"tbody"},model:{value:t.thelist,callback:function(e){t.thelist=e},expression:"thelist"}},t._l(t.thelist,(function(e){return a("router-link",{key:e.name,attrs:{to:{name:"edit",params:{slug:e.id}},tag:"tr"}},[a("td",{staticClass:"td-select",attrs:{scope:"row"}},[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.manager_email))]),a("td",[t._v(t._s(e.participant_type))]),a("td",[t._v(t._s(e.foundation_date))])])})),1)],1)]),a("br"),a("button",{staticClass:"button is-link is-medium is-rounded",on:{click:t.saveChanges}},[t._v("Save Changes")])]),a("div",{staticClass:"column"})])},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{attrs:{scope:"col"}},[t._v("Manager email address")]),a("th",{attrs:{scope:"col"}},[t._v("Type of participant")]),a("th",{attrs:{scope:"col"}},[t._v("Foundation date")])])])}],O=a("310e"),M=a.n(O),N={name:"AdminDashboard",display:"Table",order:8,components:{draggable:M.a},data(){return{dragging:!1,thelist:"",messages:[],errors:[]}},methods:{clearMessages:function(){this.messages=[]},clearErrors:function(){this.errors=[]},logout:function(){this.$store.dispatch("logout").then(()=>{this.$router.push("/login")})},saveUpdatedOrder:function(){this.listChanged=!0},saveChanges:function(t){t.preventDefault();let e="/api/bulkedit/",a=this,s=this.sortedList;console.log(s),v()({url:e,data:s,method:"PUT"}).then(t=>{a.messages.push("Changes saved")}).catch(t=>{a.errors.push(t)})}},computed:{sortOnId:function(){let t=JSON.parse(JSON.stringify(this.thelist));return t.sort((function(t,e){return t["id"]-e["id"]}))},sortedList:function(){let t=[],e=JSON.parse(JSON.stringify(this.thelist));for(let a=0;a<e.length;a++){let s=a+1,i=e[a];i["order_id"]=s,t.push(i)}return t}},created:function(){v()({url:"/api/list",method:"GET"}).then(t=>{console.log(t.request);t.data;this.thelist=t.data}).catch(t=>{this.errors.push(t),console.log(t.request)})}},$=N,q=(a("aa00"),Object(l["a"])($,S,E,!1,null,"2e99cfdc",null)),A=q.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage container"},[a("router-link",{attrs:{to:{name:"dashboard"}}},[a("p",{staticClass:"admin-login-link"},[t._v(" Dashboard")])]),a("router-link",{attrs:{to:{name:"homepage"}}},[a("h1",[t._v("Edit recruit")])]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"}),a("div",{staticClass:"column registration-form"},[t.messages.length?a("div",{staticClass:"notification is-link"},[a("button",{staticClass:"delete",on:{click:t.clearMessages}}),t._l(t.messages,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),t.errors.length?a("div",{staticClass:"notification is-danger"},[a("button",{staticClass:"delete",on:{click:t.clearErrors}}),t._l(t.errors,(function(e){return a("p",{key:e.id},[t._v(t._s(e))])}))],2):t._e(),a("h1",[t._v("Registration form")]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"Your name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Manager email address")]),a("div",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.manager_email,expression:"manager_email"}],staticClass:"input ",attrs:{type:"email",placeholder:"you@emaill.com"},domProps:{value:t.manager_email},on:{input:function(e){e.target.composing||(t.manager_email=e.target.value)}}}),t._m(0),t._m(1)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Type of participant")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.participant_type,expression:"participant_type"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.participant_type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),a("option",{attrs:{value:"Band"}},[t._v("Band")]),a("option",{attrs:{value:"Carriage"}},[t._v("Carriage")])])])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Foundation Date")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.foundation_date,expression:"foundation_date"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.foundation_date},on:{input:function(e){e.target.composing||(t.foundation_date=e.target.value)}}})])]),a("button",{staticClass:"button is-link is-fullwidth is-rounded",on:{click:t.saveChanges}},[t._v("Save Changes")])]),a("div",{staticClass:"column"})])],1)},T=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-right"},[a("i",{staticClass:"fas fa-exclamation-triangle"})])}],D={name:"SingleSoldier",components:{},data(){return{recruit:"",dragging:!1,name:"",manager_email:"",participant_type:"",foundation_date:"",id:"",errors:[],messages:[]}},methods:{saveUpdatedOrder:function(){this.listChanged=!0},saveChanges:function(t){t.preventDefault();let e={name:this.name,manager_email:this.manager_email,participant_type:this.participant_type,foundation_date:this.foundation_date,id:this.id},a="/api/edit/"+this.id+"/";v()({url:a,data:e,method:"PUT"}).then(t=>{const e=t.data;e?this.messages.push("Changes saved"):this.errors.push("Changes not changed")}).catch(t=>{this.errors.push(t)})}},created:function(){const t=this.$route.params.slug;let e="/api/edit/"+t;v()({url:e,method:"GET"}).then(t=>{this.recruit=t.data,this.name=t.data.name,this.manager_email=t.data.manager_email,this.participant_type=t.data.participant_type,this.foundation_date=t.data.foundation_date,this.id=t.data.id,console.log(t.request)}).catch(t=>{this.errors.push(t),console.log(t.request)})}},L=D,F=(a("11cc"),Object(l["a"])(L,j,T,!1,null,"3fa75feb",null)),I=F.exports;s["a"].use(d["a"]);let J=new d["a"]({mode:"history",routes:[{path:"/",name:"homepage",component:C,meta:{title:"Machina",requiresAuth:!1}},{path:"/login",name:"login",component:P,meta:{requiresAuth:!1,title:"Machina | Login"}},{path:"/dashboard",name:"dashboard",component:A,meta:{requiresAuth:!0,title:"Machina | Dasboard"}},{path:"/edit",name:"edit",component:I,meta:{requiresAuth:!1,title:"Machina | Edit"}}]});J.beforeEach((t,e,a)=>{if(t.matched.some(t=>t.meta.requiresAuth)){let e=!1;e=!!localStorage.getItem("token"),e?a():a({path:"/login",params:{nextUrl:t.fullPath}})}else a()});var U=J,R=(a("92c6"),a("2f62"));s["a"].use(R["a"]);var z=new R["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request(t){t.status="loading"},auth_success(t,e){t.status="success",t.token=e},auth_error(t){t.status="error"},logout(t){t.status="",t.token=""}},actions:{login({commit:t},e){return new Promise((a,s)=>{t("auth_request"),v()({url:"/api/auth/token/login/",data:e,method:"POST"}).then(e=>{const s="Token "+e.data.auth_token;localStorage.setItem("token",s),v.a.defaults.headers.common["Authorization"]=s,t("auth_success",s),a(e)}).catch(e=>{t("auth_error"),localStorage.removeItem("token"),s(e)})})},logout({commit:t}){return new Promise((e,a)=>{t("logout"),localStorage.removeItem("token"),delete v.a.defaults.headers.common["Authorization"],e()})}},getters:{isLoggedIn:t=>!!t.token,authStatus:t=>t.status}});s["a"].config.productionTip=!1,new s["a"]({router:U,store:z,render:t=>t(u)}).$mount("#app")},"680d":function(t,e,a){},"830e":function(t,e,a){},a470:function(t,e,a){},aa00:function(t,e,a){"use strict";var s=a("1931"),i=a.n(s);i.a},c250:function(t,e,a){"use strict";var s=a("680d"),i=a.n(s);i.a},df43:function(t,e,a){"use strict";var s=a("4709"),i=a.n(s);i.a}});
//# sourceMappingURL=app.fc62c066.js.map